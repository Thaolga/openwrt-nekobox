const languageTranslations = {
    'zh': {
        'select_language': '选择语言',
        'simplified_chinese': '简体中文',
        'traditional_chinese': '繁体中文',
        'chinese_voice_title': '中文语音播报首选：',
        'chinese_voice_mandarin': '普通话 (zh-CN)',
        'chinese_voice_cantonese': '粤语 (zh-HK)',
        'chinese_voice_taiwan': '繁体中文 (zh-TW)',
        'english': 'English',
        'korean': '韩语',
        'vietnamese': '越南语',
        'thailand': '泰语',
        'japanese': '日语',
        'russian': '俄语',
        'germany': '德语',
        'france': '法语',
        'arabic': '阿拉伯语',
        'spanish': '西班牙语',
        'bangladesh': '孟加拉语',
        'cancel': '取消',
        'save': '保存',
        'language_saved': '语言设置已保存',
        'language_save_failed': '语言设置保存失败',
        'voice_label': '语音播报',
        'voice_enable': '语音播报已启用',
        'voice_disable': '语音播报已禁用',
        'translation_enabled': 'IP 信息在线翻译已启用',
        'translation_disabled': 'IP 信息在线翻译已禁用',
        'online_translation': '在线翻译',
        'ip_details': 'IP 地址详情',
        'ping': '延迟',
        'timeout': '连接超时',
        'selectBackgroundColor': '选择背景颜色',
        'backgroundColorApplied': '背景颜色 %s 已成功应用。',
        'edit_ip_database': '编辑 IP 数据库',
        'close': '关闭',
        'fullscreen': '全屏 (F11)',
        'json_error': 'JSON格式错误，请检查！',
        'save_success': '保存成功',
        'save_fail': '保存失败',
        'loading_editor': '加载编辑器中...',
        'clear': '清空',
        'clear_confirm': '确定要清空 IP 数据库吗？',
        'clear_success': '已清空 IP 数据库',
        'clear_fail': '清空失败'
    },
    'hk': {
        'select_language': '選擇語言',
        'simplified_chinese': '簡體中文',
        'traditional_chinese': '繁體中文',
        'chinese_voice_title': '中文語音播報首選：',
        'chinese_voice_mandarin': '普通話 (zh-CN)',
        'chinese_voice_cantonese': '粵語 (zh-HK)',
        'chinese_voice_taiwan': '繁體中文 (zh-TW)',
        'english': 'English',
        'korean': '韓語',
        'vietnamese': '越南語',
        'thailand': '泰語',
        'japanese': '日語',
        'russian': '俄語',
        'germany': '德語',
        'france': '法語',
        'arabic': '阿拉伯語',
        'spanish': '西班牙語',
        'bangladesh': '孟加拉語',
        'cancel': '取消',
        'save': '保存',
        'language_saved': '語言設置已保存',
        'language_save_failed': '語言設置保存失敗',
        'voice_label': '語音播報',
        'voice_enable': '語音播報已啟用',
        'voice_disable': '語音播報已禁用',
        'translation_enabled': 'IP 信息在線翻譯已啟用',
        'translation_disabled': 'IP 信息在線翻譯已禁用',
        'online_translation': '線上翻譯',
        'ip_details': 'IP 位址詳情',
        'ping': '延遲',
        'timeout': '連接超時',
        'selectBackgroundColor': '選擇背景顏色',
        'backgroundColorApplied': '背景顏色 %s 已成功應用。',
        'edit_ip_database': '編輯 IP 數據庫',
        'close': '關閉',
        'fullscreen': '全螢幕 (F11)',
        'json_error': 'JSON格式錯誤，請檢查！',
        'save_success': '儲存成功',
        'save_fail': '儲存失敗',
        'loading_editor': '載入編輯器中...',
        'clear': '清空',
        'clear_confirm': '確定要清空 IP 數據庫嗎？',
        'clear_success': '已清空 IP 數據庫',
        'clear_fail': '清空失敗'
    },
    'en': {
        'select_language': 'Select Language',
        'simplified_chinese': 'Simplified Chinese',
        'traditional_chinese': 'Traditional Chinese',
        'english': 'English',
        'korean': 'Korean',
        'vietnamese': 'Vietnamese',
        'thailand': 'Thai',
        'japanese': 'Japanese',
        'russian': 'Russian',
        'germany': 'German',
        'france': 'French',
        'arabic': 'Arabic',
        'spanish': 'Spanish',
        'bangladesh': 'Bengali',
        'cancel': 'Cancel',
        'save': 'Save',
        'language_saved': 'Language settings saved',
        'language_save_failed': 'Language settings save failed',
        'translation_enabled': 'IP information online translation enabled',
        'translation_disabled': 'IP information online translation disabled',
        'online_translation': 'Online Translation',
        'ip_details': 'IP Details',
        'voice_label': 'Voice Broadcast',
        'voice_enable': 'Voice broadcast enabled',
        'voice_disable': 'Voice broadcast disabled',
        'ping': 'Ping',
        'timeout': 'Connection timeout',
        'selectBackgroundColor': 'Select background color',
        'backgroundColorApplied': 'Background color %s has been applied successfully.',
        'edit_ip_database': 'Edit IP Database',
        'close': 'Close',
        'fullscreen': 'Fullscreen (F11)',
        'json_error': 'Invalid JSON format!',
        'save_success': 'Saved successfully',
        'save_fail': 'Save failed',
        'loading_editor': 'Loading editor...',
        'clear': 'Clear',
        'clear_confirm': 'Are you sure to clear the IP database?',
        'clear_success': 'IP database cleared',
        'clear_fail': 'Clear failed'
    },
    'ko': {
        'select_language': '언어 선택',
        'simplified_chinese': '간체 중국어',
        'traditional_chinese': '번체 중국어',
        'english': '영어',
        'korean': '한국어',
        'vietnamese': '베트남어',
        'thailand': '태국어',
        'japanese': '일본어',
        'russian': '러시아어',
        'germany': '독일어',
        'france': '프랑스어',
        'arabic': '아랍어',
        'spanish': '스페인어',
        'bangladesh': '벵골어',
        'cancel': '취소',
        'save': '저장',
        'language_saved': '언어 설정이 저장되었습니다',
        'language_save_failed': '언어 설정 저장 실패',
        'translation_enabled': 'IP 정보 온라인 번역 사용',
        'translation_disabled': 'IP 정보 온라인 번역 사용 안 함',
        'online_translation': '온라인 번역',
        'ip_details': 'IP 상세 정보',
        'voice_label': '음성 방송',
        'voice_enable': '음성 방송이 활성화되었습니다',
        'voice_disable': '음성 방송이 비활성화되었습니다',
        'ping': '핑',
        'timeout': '연결 시간 초과',
        'selectBackgroundColor': '배경색 선택',
        'backgroundColorApplied': '배경색 %s 이(가) 성공적으로 적용되었습니다.',
        'close': '닫기',
        'fullscreen': '전체 화면 (F11)',
        'json_error': 'JSON 형식 오류!',
        'save_success': '저장 성공',
        'save_fail': '저장 실패',
        'loading_editor': '편집기 로딩 중...',
        'clear': '초기화',
        'clear_confirm': 'IP 데이터베이스를 초기화하시겠습니까?',
        'clear_success': 'IP 데이터베이스가 초기화되었습니다',
        'clear_fail': '초기화 실패'
    },
    'vi': {
        'select_language': 'Chọn ngôn ngữ',
        'simplified_chinese': 'Tiếng Trung Giản Thể',
        'traditional_chinese': 'Tiếng Trung Phồn Thể',
        'english': 'Tiếng Anh',
        'korean': 'Tiếng Hàn',
        'vietnamese': 'Tiếng Việt',
        'thailand': 'Tiếng Thái',
        'japanese': 'Tiếng Nhật',
        'russian': 'Tiếng Nga',
        'germany': 'Tiếng Đức',
        'france': 'Tiếng Pháp',
        'arabic': 'Tiếng Ả Rập',
        'spanish': 'Tiếng Tây Ban Nha',
        'bangladesh': 'Tiếng Bengal',
        'cancel': 'Hủy',
        'save': 'Lưu',
        'language_saved': 'Đã lưu cài đặt ngôn ngữ',
        'language_save_failed': 'Lưu cài đặt ngôn ngữ thất bại',
        'translation_enabled': 'Dịch trực tuyến thông tin IP đã bật',
        'translation_disabled': 'Dịch trực tuyến thông tin IP đã tắt',
        'online_translation': 'Dịch trực tuyến',
        'ip_details': 'Chi tiết IP',
        'voice_label': 'Phát thanh giọng nói',
        'voice_enable': 'Phát thanh giọng nói đã bật',
        'voice_disable': 'Phát thanh giọng nói đã tắt',
        'ping': 'Độ trễ',
        'timeout': 'Hết thời gian kết nối',
        'selectBackgroundColor': 'Chọn màu nền',
        'backgroundColorApplied': 'Màu nền %s đã được áp dụng thành công.',
        'edit_ip_database': 'Chỉnh sửa cơ sở dữ liệu IP',
        'close': 'Đóng',
        'fullscreen': 'Toàn màn hình (F11)',
        'json_error': 'Định dạng JSON không hợp lệ!',
        'save_success': 'Lưu thành công',
        'save_fail': 'Lưu thất bại',
        'loading_editor': 'Đang tải trình chỉnh sửa...',
        'clear': 'Xóa',
        'clear_confirm': 'Bạn có chắc muốn xóa cơ sở dữ liệu IP không?',
        'clear_success': 'Đã xóa cơ sở dữ liệu IP',
        'clear_fail': 'Xóa thất bại'

    },
    'th': {
        'select_language': 'เลือกภาษา',
        'simplified_chinese': 'ภาษาจีนตัวย่อ',
        'traditional_chinese': 'ภาษาจีนตัวเต็ม',
        'english': 'ภาษาอังกฤษ',
        'korean': 'ภาษาเกาหลี',
        'vietnamese': 'ภาษาเวียดนาม',
        'thailand': 'ภาษาไทย',
        'japanese': 'ภาษาญี่ปุ่น',
        'russian': 'ภาษารัสเซีย',
        'germany': 'ภาษาเยอรมัน',
        'france': 'ภาษาฝรั่งเศส',
        'arabic': 'ภาษาอาหรับ',
        'spanish': 'ภาษาสเปน',
        'bangladesh': 'ภาษาเบงกาลี',
        'cancel': 'ยกเลิก',
        'save': 'บันทึก',
        'language_saved': 'บันทึกการตั้งค่าภาษาเรียบร้อยแล้ว',
        'language_save_failed': 'บันทึกการตั้งค่าภาษาไม่สำเร็จ',
        'translation_enabled': 'เปิดใช้งานการแปลออนไลน์ข้อมูล IP แล้ว',
        'translation_disabled': 'ปิดใช้งานการแปลออนไลน์ข้อมูล IP แล้ว',
        'online_translation': 'แปลออนไลน์',
        'ip_details': 'รายละเอียด IP',
        'voice_label': 'การอ่านเสียง',
        'voice_enable': 'การอ่านเสียงถูกเปิดใช้งาน',
        'voice_disable': 'การอ่านเสียงถูกปิดใช้งาน',
        'ping': 'ดีเลย์',
        'timeout': 'หมดเวลาการเชื่อมต่อ',
        'selectBackgroundColor': 'เลือกสีพื้นหลัง',
        'backgroundColorApplied': 'สีพื้นหลัง %s ถูกนำไปใช้สำเร็จแล้ว',
        'edit_ip_database': 'แก้ไขฐานข้อมูล IP',
        'close': 'ปิด',
        'fullscreen': 'เต็มจอ (F11)',
        'json_error': 'รูปแบบ JSON ไม่ถูกต้อง!',
        'save_success': 'บันทึกสำเร็จ',
        'save_fail': 'บันทึกไม่สำเร็จ',
        'loading_editor': 'กำลังโหลดตัวแก้ไข...',
        'clear': 'ล้าง',
        'clear_confirm': 'คุณแน่ใจหรือไม่ว่าจะล้างฐานข้อมูล IP?',
        'clear_success': 'ล้างฐานข้อมูล IP เรียบร้อย',
        'clear_fail': 'ล้างไม่สำเร็จ'

    },
    'ja': {
        'select_language': '言語を選択',
        'simplified_chinese': '簡体字中国語',
        'traditional_chinese': '繁体字中国語',
        'english': '英語',
        'korean': '韓国語',
        'vietnamese': 'ベトナム語',
        'thailand': 'タイ語',
        'japanese': '日本語',
        'russian': 'ロシア語',
        'germany': 'ドイツ語',
        'france': 'フランス語',
        'arabic': 'アラビア語',
        'spanish': 'スペイン語',
        'bangladesh': 'ベンガル語',
        'cancel': 'キャンセル',
        'save': '保存',
        'language_saved': '言語設定が保存されました',
        'language_save_failed': '言語設定の保存に失敗しました',
        'translation_enabled': 'IP情報オンライン翻訳が有効になりました',
        'translation_disabled': 'IP情報オンライン翻訳が無効になりました',
        'online_translation': 'オンライン翻訳',
        'ip_details': 'IP 詳細情報',
        'voice_label': '音声放送',
        'voice_enable': '音声放送が有効になりました',
        'voice_disable': '音声放送が無効になりました',
        'ping': 'ピング',
        'timeout': '接続タイムアウト',
        'selectBackgroundColor': '背景色を選択',
        'backgroundColorApplied': '背景色 %s が正常に適用されました。',
        'edit_ip_database': 'IPデータベースを編集',
        'close': '閉じる',
        'fullscreen': '全画面 (F11)',
        'json_error': 'JSON形式が正しくありません！',
        'save_success': '保存しました',
        'save_fail': '保存に失敗しました',
        'loading_editor': 'エディターを読み込み中...',
        'clear': 'クリア',
        'clear_confirm': 'IPデータベースをクリアしてもよろしいですか？',
        'clear_success': 'IPデータベースをクリアしました',
        'clear_fail': 'クリアに失敗しました'

    },
    'ru': {
        'select_language': 'Выберите язык',
        'simplified_chinese': 'Упрощенный китайский',
        'traditional_chinese': 'Традиционный китайский',
        'english': 'Английский',
        'korean': 'Корейский',
        'vietnamese': 'Вьетнамский',
        'thailand': 'Тайский',
        'japanese': 'Японский',
        'russian': 'Русский',
        'germany': 'Немецкий',
        'france': 'Французский',
        'arabic': 'Арабский',
        'spanish': 'Испанский',
        'bangladesh': 'Бенгальский',
        'cancel': 'Отмена',
        'save': 'Сохранить',
        'language_saved': 'Настройки языка сохранены',
        'language_save_failed': 'Не удалось сохранить настройки языка',
        'translation_enabled': 'Онлайн-перевод IP-информации включен',
        'translation_disabled': 'Онлайн-перевод IP-информации отключен',
        'online_translation': 'Онлайн-перевод',
        'ip_details': 'Детали IP',
        'voice_label': 'Голосовая трансляция',
        'voice_enable': 'Голосовая трансляция включена',
        'voice_disable': 'Голосовая трансляция отключена',
        'ping': 'Пинг',
        'timeout': 'Время ожидания соединения',
        'selectBackgroundColor': 'Выбрать цвет фона',
        'backgroundColorApplied': 'Фоновый цвет %s был успешно применен.',
        'edit_ip_database': 'Редактировать базу IP',
        'close': 'Закрыть',
        'fullscreen': 'Полный экран (F11)',
        'json_error': 'Неверный формат JSON!',
        'save_success': 'Успешно сохранено',
        'save_fail': 'Ошибка сохранения',
        'loading_editor': 'Загрузка редактора...',
        'clear': 'Очистить',
        'clear_confirm': 'Вы уверены, что хотите очистить базу IP?',
        'clear_success': 'База IP очищена',
        'clear_fail': 'Не удалось очистить'
    },
    'ar': {
        'select_language': 'اختر اللغة',
        'simplified_chinese': 'الصينية المبسطة',
        'traditional_chinese': 'الصينية التقليدية',
        'english': 'الإنجليزية',
        'korean': 'الكورية',
        'vietnamese': 'الفيتنامية',
        'thailand': 'التايلاندية',
        'japanese': 'اليابانية',
        'russian': 'الروسية',
        'germany': 'الألمانية',
        'france': 'الفرنسية',
        'arabic': 'العربية',
        'spanish': 'الإسبانية',
        'bangladesh': 'البنغالية',
        'cancel': 'إلغاء',
        'save': 'حفظ',
        'language_saved': 'تم حفظ إعدادات اللغة',
        'language_save_failed': 'فشل حفظ إعدادات اللغة',
        'translation_enabled': 'تم تمكين الترجمة عبر الإنترنت لمعلومات IP',
        'translation_disabled': 'تم تعطيل الترجمة عبر الإنترنت لمعلومات IP',
        'online_translation': 'الترجمة عبر الإنترنت',
        'ip_details': 'تفاصيل IP',
        'voice_label': 'البث الصوتي',
        'voice_enable': 'تم تمكين البث الصوتي',
        'voice_disable': 'تم تعطيل البث الصوتي',
        'ping': 'تأخير',
        'timeout': 'انتهت مهلة الاتصال',
        'selectBackgroundColor': 'اختر لون الخلفية',
        'backgroundColorApplied': 'تم تطبيق لون الخلفية %s بنجاح.',
        'edit_ip_database': 'تحرير قاعدة بيانات IP',
        'close': 'إغلاق',
        'fullscreen': 'ملء الشاشة (F11)',
        'json_error': 'تنسيق JSON غير صالح!',
        'save_success': 'تم الحفظ بنجاح',
        'save_fail': 'فشل الحفظ',
        'loading_editor': 'جاري تحميل المحرر...',
        'clear': 'مسح',
        'clear_confirm': 'هل أنت متأكد من مسح قاعدة بيانات IP؟',
        'clear_success': 'تم مسح قاعدة بيانات IP',
        'clear_fail': 'فشل المسح'
    },
    'es': {
        'select_language': 'Seleccionar idioma',
        'simplified_chinese': 'Chino simplificado',
        'traditional_chinese': 'Chino tradicional',
        'english': 'Inglés',
        'korean': 'Coreano',
        'vietnamese': 'Vietnamita',
        'thailand': 'Tailandés',
        'japanese': 'Japonés',
        'russian': 'Ruso',
        'germany': 'Alemán',
        'france': 'Francés',
        'arabic': 'Árabe',
        'spanish': 'Español',
        'bangladesh': 'Bengalí',
        'cancel': 'Cancelar',
        'save': 'Guardar',
        'language_saved': 'Configuración de idioma guardada',
        'language_save_failed': 'Error al guardar la configuración de idioma',
        'translation_enabled': 'Traducción en línea de información IP habilitada',
        'translation_disabled': 'Traducción en línea de información IP deshabilitada',
        'online_translation': 'Traducción en línea',
        'ip_details': 'Detalles de IP',
        'voice_label': 'Transmisión de voz',
        'voice_enable': 'Transmisión de voz habilitada',
        'voice_disable': 'Transmisión de voz deshabilitada',
        'ping': 'Ping',
        'timeout': 'Tiempo de conexión agotado',
        'selectBackgroundColor': 'Seleccionar color de fondo',
        'backgroundColorApplied': 'El color de fondo %s se ha aplicado correctamente.',
        'edit_ip_database': 'Editar base de datos IP',
        'close': 'Cerrar',
        'fullscreen': 'Pantalla completa (F11)',
        'json_error': '¡Formato JSON inválido!',
        'save_success': 'Guardado exitosamente',
        'save_fail': 'Error al guardar',
        'loading_editor': 'Cargando editor...',
        'clear': 'Borrar',
        'clear_confirm': '¿Está seguro de borrar la base de datos IP?',
        'clear_success': 'Base de datos IP borrada',
        'clear_fail': 'Error al borrar'
    },
    'de': {
        'select_language': 'Sprache auswählen',
        'simplified_chinese': 'Vereinfachtes Chinesisch',
        'traditional_chinese': 'Traditionelles Chinesisch',
        'english': 'Englisch',
        'korean': 'Koreanisch',
        'vietnamese': 'Vietnamesisch',
        'thailand': 'Thailändisch',
        'japanese': 'Japanisch',
        'russian': 'Russisch',
        'germany': 'Deutsch',
        'france': 'Französisch',
        'arabic': 'Arabisch',
        'spanish': 'Spanisch',
        'bangladesh': 'Bengalisch',
        'cancel': 'Abbrechen',
        'save': 'Speichern',
        'language_saved': 'Spracheinstellungen gespeichert',
        'language_save_failed': 'Speichern der Spracheinstellungen fehlgeschlagen',
        'translation_enabled': 'IP-Informationen Online-Übersetzung aktiviert',
        'translation_disabled': 'IP-Informationen Online-Übersetzung deaktiviert',
        'online_translation': 'Online-Übersetzung',
        'ip_details': 'IP-Details',
        'voice_label': 'Sprachansage',
        'voice_enable': 'Sprachansage aktiviert',
        'voice_disable': 'Sprachansage deaktiviert',
        'ping': 'Ping',
        'timeout': 'Verbindungszeitüberschreitung',
        'selectBackgroundColor': 'Hintergrundfarbe auswählen',
        'backgroundColorApplied': 'Hintergrundfarbe %s wurde erfolgreich angewendet.',
        'edit_ip_database': 'IP-Datenbank bearbeiten',
        'close': 'Schließen',
        'fullscreen': 'Vollbild (F11)',
        'json_error': 'Ungültiges JSON-Format!',
        'save_success': 'Erfolgreich gespeichert',
        'save_fail': 'Speichern fehlgeschlagen',
        'loading_editor': 'Editor wird geladen...',
        'clear': 'Leeren',
        'clear_confirm': 'Möchten Sie die IP-Datenbank wirklich leeren?',
        'clear_success': 'IP-Datenbank geleert',
        'clear_fail': 'Leeren fehlgeschlagen'

    },
    'fr': {
        'select_language': 'Choisir la langue',
        'simplified_chinese': 'Chinois simplifié',
        'traditional_chinese': 'Chinois traditionnel',
        'english': 'Anglais',
        'korean': 'Coréen',
        'vietnamese': 'Vietnamien',
        'thailand': 'Thaïlandais',
        'japanese': 'Japonais',
        'russian': 'Russe',
        'germany': 'Allemand',
        'france': 'Français',
        'arabic': 'Arabe',
        'spanish': 'Espagnol',
        'bangladesh': 'Bengali',
        'cancel': 'Annuler',
        'save': 'Enregistrer',
        'language_saved': 'Paramètres de langue enregistrés',
        'language_save_failed': 'Échec de l\'enregistrement des paramètres de langue',
        'translation_enabled': 'Traduction en ligne des informations IP activée',
        'translation_disabled': 'Traduction en ligne des informations IP désactivée',
        'online_translation': 'Traduction en ligne',
        'ip_details': 'Détails IP',
        'voice_label': 'Diffusion vocale',
        'voice_enable': 'Diffusion vocale activée',
        'voice_disable': 'Diffusion vocale désactivée',
        'ping': 'Ping',
        'timeout': 'Délai de connexion',
        'selectBackgroundColor': 'Sélectionner la couleur d\'arrière-plan',
        'backgroundColorApplied': 'La couleur d\'arrière-plan %s a été appliquée avec succès.',
        'edit_ip_database': 'Modifier la base IP',
        'close': 'Fermer',
        'fullscreen': 'Plein écran (F11)',
        'json_error': 'Format JSON invalide !',
        'save_success': 'Enregistrement réussi',
        'save_fail': 'Échec de l\'enregistrement',
        'loading_editor': 'Chargement de l\'éditeur...',
        'clear': 'Vider',
        'clear_confirm': 'Êtes-vous sûr de vouloir vider la base IP ?',
        'clear_success': 'Base IP vidée',
        'clear_fail': 'Échec du vidage'

    },
    'bn': {
        'select_language': 'ভাষা নির্বাচন করুন',
        'simplified_chinese': 'সরলীকৃত চাইনিজ',
        'traditional_chinese': 'পরম্পরাগত চাইনিজ',
        'english': 'ইংরেজি',
        'korean': 'কোরিয়ান',
        'vietnamese': 'ভিয়েতনামী',
        'thailand': 'থাই',
        'japanese': 'জাপানি',
        'russian': 'রাশিয়ান',
        'germany': 'জার্মান',
        'france': 'ফরাসি',
        'arabic': 'আরবি',
        'spanish': 'স্প্যানিশ',
        'bangladesh': 'বাংলা',
        'cancel': 'বাতিল',
        'save': 'সংরক্ষণ',
        'language_saved': 'ভাষা সেটিংস সংরক্ষণ করা হয়েছে',
        'language_save_failed': 'ভাষা সেটিংস সংরক্ষণ ব্যর্থ হয়েছে',
        'translation_enabled': 'IP তথ্য অনলাইন অনুবাদ সক্ষম হয়েছে',
        'translation_disabled': 'IP তথ্য অনলাইন অনুবাদ অক্ষম হয়েছে',
        'online_translation': 'অনলাইন অনুবাদ',
        'ip_details': 'IP বিশদ',
        'voice_label': 'ভয়েস সম্প্রচার',
        'voice_enable': 'ভয়েস সম্প্রচার সক্ষম হয়েছে',
        'voice_disable': 'ভয়েস সম্প্রচার অক্ষম হয়েছে',
        'ping': 'পিং',
        'timeout': 'কানেকশন টাইমআউট',
        'selectBackgroundColor': 'ব্যাকগ্রাউন্ড কালার নির্বাচন করুন',
        'backgroundColorApplied': 'ব্যাকগ্রাউন্ড কালার %s সফলভাবে প্রয়োগ করা হয়েছে।',
        'edit_ip_database': 'IP ডাটাবেস সম্পাদনা',
        'close': 'বন্ধ',
        'save': 'সংরক্ষণ',
        'fullscreen': 'পূর্ণ স্ক্রিন (F11)',
        'json_error': 'অবৈধ JSON ফরম্যাট!',
        'save_success': 'সফলভাবে সংরক্ষিত',
        'save_fail': 'সংরক্ষণ ব্যর্থ',
        'loading_editor': 'সম্পাদক লোড হচ্ছে...',
        'clear': 'সাফ করুন',
        'clear_confirm': 'IP ডাটাবেস মুছে ফেলতে চান?',
        'clear_success': 'IP ডাটাবেস মুছে ফেলা হয়েছে',
        'clear_fail': 'মুছে ফেলতে ব্যর্থ'

    }
};

const languageStandardMap = {
    'zh': 'zh-CN',
    'hk': 'zh-TW', 
    'en': 'en-US',
    'ko': 'ko-KR',
    'ja': 'ja-JP',
    'ru': 'ru-RU',
    'ar': 'ar-EG',
    'es': 'es-ES',
    'de': 'de-DE',
    'fr': 'fr-FR',
    'th': 'th-TH',
    'bn': 'bn-BD',
    'vi': 'vi-VN'
};

const flagMap = {
    'zh': '/luci-static/ipip/flags/cn.png',
    'hk': '/luci-static/ipip/flags/hk.png',
    'en': '/luci-static/ipip/flags/us.png',
    'ko': '/luci-static/ipip/flags/kr.png',
    'ja': '/luci-static/ipip/flags/jp.png',
    'ru': '/luci-static/ipip/flags/ru.png',
    'ar': '/luci-static/ipip/flags/sa.png',
    'es': '/luci-static/ipip/flags/es.png',
    'de': '/luci-static/ipip/flags/de.png',
    'fr': '/luci-static/ipip/flags/fr.png',
    'th': '/luci-static/ipip/flags/th.png',
    'bn': '/luci-static/ipip/flags/bd.png',
    'vi': '/luci-static/ipip/flags/vn.png'
};

const langToVoiceMap = {
    'zh': 'zh-CN',
    'en': 'en-US',
    'hk': 'zh-TW',
    'de': 'de-DE',
    'fr': 'fr-FR',
    'ko': 'ko-KR',
    'ja': 'ja-JP',
    'bn': 'bn-BD',
    'vi': 'vi-VN',
    'th': 'th-TH',
    'ar': 'ar-SA',
    'ru': 'ru-RU',
    'es': 'es-ES'
};

let currentLang = 'zh';
let colorVoiceEnabled = localStorage.getItem('colorVoiceEnabled') !== 'false';

function updateFlagIcon(lang) {
    const flagImg = document.getElementById('currentFlag');
    if (flagImg && flagMap[lang]) {
        flagImg.src = flagMap[lang];
    }
}

function updateUIText() {
    const translations = languageTranslations[currentLang] || languageTranslations['zh'];
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[key]) {
            element.textContent = translations[key];
        }
    });

    document.querySelectorAll('[data-title]').forEach(element => {
        const key = element.getAttribute('data-title');
        if (translations[key]) {
            element.setAttribute('title', translations[key]);
        }
    });

    document.querySelectorAll('[data-placeholder]').forEach(element => {
        const key = element.getAttribute('data-placeholder');
        if (translations[key]) {
            element.setAttribute('placeholder', translations[key]);
        }
    });

    document.querySelectorAll('[data-alt]').forEach(element => {
        const key = element.getAttribute('data-alt');
        if (translations[key]) {
            element.setAttribute('alt', translations[key]);
        }
    });
    
    updateFlagIcon(currentLang);
}

function closeLanguageModal() {
    document.getElementById('languageModal').style.display = 'none';
}

function saveLanguage() {
    const language = document.getElementById('languageSelect').value;
    const translations = languageTranslations[language] || languageTranslations['zh'];
    const languageKey = getOptionTranslationKey(language);
    const languageText = translations[languageKey] || language;
    const standardCode = getVoiceLang(language);

    fetch('/luci-static/spectra/bgm/save_language.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: 'action=save_language&language=' + language
    })
    .then(response => response.json())
    .then(data => {
        const msg = data.success
            ? `${translations['language_saved']}: ${languageText} (${standardCode})`
            : `${translations['language_save_failed']}: ${languageText} (${standardCode})`;

        showWeatherLog(msg);
        speakWeatherMessage(msg);

        if (data.success) {
            currentLang = language;
            updateUIText();
            setTimeout(() => location.reload(), 8000);
            closeLanguageModal();
        }
    });
}

function openLanguageModal() {
    fetch('/luci-static/spectra/bgm/save_language.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: 'action=get_language'
    })
    .then(response => response.json())
    .then(data => {
        if (data.success && data.language) {
            document.getElementById('languageSelect').value = data.language;
            currentLang = data.language;
            updateUIText();
        }

        const voiceToggle = document.getElementById('voiceToggle');
        voiceToggle.checked = colorVoiceEnabled;
        const isChinese = ['zh', 'hk'].includes(currentLang);
        document.getElementById('chineseVoiceSelect').style.display = isChinese ? 'block' : 'none';

        const radios = document.querySelectorAll('input[name="chineseVoice"]');
        const saved = getChineseVoicePreference();
        radios.forEach(radio => {
            radio.checked = (radio.value === saved);
            radio.removeEventListener('change', handleChineseVoiceChange);
            radio.addEventListener('change', handleChineseVoiceChange);
        });

        document.getElementById('languageModal').style.display = 'block';
    })
    .catch(() => document.getElementById('languageModal').style.display = 'block');
}

function handleChineseVoiceChange() {
    localStorage.setItem('chineseVoiceLang', this.value);
    const t = languageTranslations[currentLang] || languageTranslations['zh'];
    let voicePreferenceText = this.value;
    if (this.value === 'zh-CN') {
        voicePreferenceText = t['chinese_voice_mandarin'] || '普通话 (zh-CN)';
    } else if (this.value === 'zh-HK') {
        voicePreferenceText = t['chinese_voice_cantonese'] || '粤语 (zh-HK)';
    } else if (this.value === 'zh-TW') {
        voicePreferenceText = t['chinese_voice_taiwan'] || '繁體中文 (zh-TW)';
    }
    const msg = `${t['language_saved']}: ${voicePreferenceText}`;
    if (colorVoiceEnabled) {
        showWeatherLog(msg);
        speakWeatherMessage(msg);
    }
}

function getChineseVoicePreference() {
    return localStorage.getItem('chineseVoiceLang') || 'zh-CN';
}

function getVoiceLang(lang) {
    const map = {
        zh: getChineseVoicePreference(),
        hk: getChineseVoicePreference(),
        en: 'en-US',
        ko: 'ko-KR',
        ja: 'ja-JP',
        vi: 'vi-VN',
        th: 'th-TH',
        ru: 'ru-RU',
        ar: 'ar-SA',
        es: 'es-ES',
        de: 'de-DE',
        fr: 'fr-FR',
        bn: 'bn-BD'
    };
    return map[lang] || 'zh-CN';
}

function getOptionTranslationKey(value) {
    const keyMap = {
        'zh': 'simplified_chinese',
        'hk': 'traditional_chinese',
        'en': 'english',
        'ko': 'korean',
        'vi': 'vietnamese',
        'th': 'thailand',
        'ja': 'japanese',
        'ru': 'russian',
        'de': 'germany',
        'fr': 'france',
        'ar': 'arabic',
        'es': 'spanish',
        'bn': 'bangladesh'
    };
    return keyMap[value] || value;
}

function speakWeatherMessage(message) {
    if (!colorVoiceEnabled) return;

    const xhr = new XMLHttpRequest();
    xhr.open('GET', '/luci-static/spectra/bgm/language.txt', false);
    xhr.send();

    if (xhr.status === 200) {
        const lang = xhr.responseText.trim();
        const utterance = new SpeechSynthesisUtterance(message);
        utterance.lang = getVoiceLang(lang);
        speechSynthesis.speak(utterance);
    }
}

document.addEventListener('DOMContentLoaded', function() {
    const languageSelect = document.getElementById('languageSelect');
    languageSelect.addEventListener('change', function() {
        updateFlagIcon(this.value);
        document.getElementById('chineseVoiceSelect').style.display = ['zh', 'hk'].includes(this.value) ? 'block' : 'none';
        currentLang = this.value;
        updateUIText();
    });

    const voiceToggle = document.getElementById('voiceToggle');
    voiceToggle.addEventListener('change', function() {
        colorVoiceEnabled = this.checked;
        localStorage.setItem('colorVoiceEnabled', colorVoiceEnabled);
        const t = languageTranslations[currentLang] || languageTranslations['zh'];
        const msg = colorVoiceEnabled ? t['voice_enable'] : t['voice_disable'];
        showWeatherLog(msg);
        speakWeatherMessage(msg);
    });

    fetch('/luci-static/spectra/bgm/save_language.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: 'action=get_language'
    })
    .then(response => response.json())
    .then(data => {
        if (data.success && data.language) {
            currentLang = data.language;
            updateUIText();
        }
    });

    document.getElementById('languageModal').addEventListener('click', function(e) {
        if (e.target === this) closeLanguageModal();
    });

    let currentHue = 260, currentChroma = 0.10, currentLightness = 30;
    let recentColors = [];

    function hexToRgb(hex) {
        const fullHex = hex.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i, 
            (_, r, g, b) => `#${r}${r}${g}${g}${b}${b}`);
        const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(fullHex);
        return result ? {
            r: parseInt(result[1], 16),
            g: parseInt(result[2], 16),
            b: parseInt(result[3], 16)
        } : { r: 0, g: 0, b: 0 };
    }

    function rgbToLinear(c) {
        const normalized = c / 255;
        return normalized <= 0.04045 
            ? normalized / 12.92 
            : Math.pow((normalized + 0.055) / 1.055, 2.4);
    }

    function rgbToOklch(r, g, b) {
        const [lr, lg, lb] = [r, g, b].map(rgbToLinear);
        const l = 0.4122214708 * lr + 0.5363325363 * lg + 0.0514459929 * lb;
        const m = 0.2119034982 * lr + 0.6806995451 * lg + 0.1073969566 * lb;
        const s = 0.0883024619 * lr + 0.2817188376 * lg + 0.6299787005 * lb;
        const l_ = Math.cbrt(l);
        const m_ = Math.cbrt(m);
        const s_ = Math.cbrt(s);
        const L = 0.2104542553 * l_ + 0.7936177850 * m_ - 0.0040720468 * s_;
        const a = 1.9779984951 * l_ - 2.4285922050 * m_ + 0.4505937099 * s_;
        const b_ = 0.0259040371 * l_ + 0.7827717662 * m_ - 0.8086757660 * s_;
        const c = Math.sqrt(a ** 2 + b_ ** 2);
        let h = Math.atan2(b_, a) * 180 / Math.PI;
        h = h >= 0 ? h : h + 360;
        return { l: L * 100, c: c, h: h };
    }

    function hexToOklch(hex) {
        const { r, g, b } = hexToRgb(hex);
        return rgbToOklch(r, g, b);
    }

    function oklchToHex(h, c, l = 50) {
        const L = l / 100;
        const a = c * Math.cos(h * Math.PI / 180);
        const b = c * Math.sin(h * Math.PI / 180);
        const l_ = L + 0.3963377774 * a + 0.2158037573 * b;
        const m_ = L - 0.1055613458 * a - 0.0638541728 * b;
        const s_ = L - 0.0894841775 * a - 1.2914855480 * b;
        const [lr, lg, lb] = [l_, m_, s_].map(v => v ** 3);
        const r = 4.0767416621 * lr - 3.3077115913 * lg + 0.2309699292 * lb;
        const g = -1.2684380046 * lr + 2.6097574011 * lg - 0.3413193965 * lb;
        const bLinear = -0.0041960863 * lr - 0.7034186147 * lg + 1.7076147010 * lb;
        const toSRGB = (v) => {
            v = Math.min(Math.max(v, 0), 1);
            return v > 0.0031308 
                ? 1.055 * (v ** (1/2.4)) - 0.055 
                : 12.92 * v;
        };
        const [R, G, B] = [r, g, bLinear].map(v => Math.round(toSRGB(v) * 255));
        return `#${[R, G, B].map(x => x.toString(16).padStart(2, '0')).join('')}`.toUpperCase();
    }

    function updateAllCSSVariables() {
        const root = document.documentElement;

        root.style.setProperty('--base-hue', currentHue);
        root.style.setProperty('--base-chroma', currentChroma);
        root.style.setProperty('--base-hue-1', currentHue + 20);
        root.style.setProperty('--base-hue-2', currentHue + 200);
        root.style.setProperty('--base-hue-3', currentHue + 135);
        root.style.setProperty('--base-hue-4', currentHue + 80);
        root.style.setProperty('--base-hue-5', currentHue + 270);
        root.style.setProperty('--base-hue-6', currentHue + 170);
        root.style.setProperty('--base-hue-7', currentHue + 340);
        
        const isLight = currentLightness > 60;
        const theme = isLight ? 'light' : 'dark';
        root.setAttribute('data-theme', theme);
        console.log('Updated theme to:', theme);
    }

    function applyColorSettings(showMessage = false) {
        const settings = {
            hue: currentHue,
            chroma: currentChroma,
            lightness: currentLightness,
            recentColors: recentColors || []
        };
        localStorage.setItem('appColorSettings', JSON.stringify(settings));

        updateAllCSSVariables();
        updateTextPrimary(currentLightness);
        updateThemeIcon(currentLightness);

        if (showMessage) {
            const hexColor = oklchToHex(currentHue, currentChroma, currentLightness);
            const translations = languageTranslations[currentLang] || languageTranslations['zh'];
            const successMsg = translations['backgroundColorApplied'].replace('%s', hexColor);
        
            console.log(successMsg);
        
            if (typeof showWeatherLog === 'function') {
                showWeatherLog(successMsg);
            }
            if (colorVoiceEnabled) {
                speakWeatherMessage(successMsg);
            }
        }
    }

    function updateTextPrimary(currentL) {
        const textL = currentL > 60 ? 20 : 95;
        document.documentElement.style.setProperty('--text-primary', `oklch(${textL}% 0 0)`);
    }

    function addToRecentColors(color) {
        recentColors = recentColors.filter(c => c !== color);
        recentColors.unshift(color);
    
        if (recentColors.length > 10) {
            recentColors.pop();
        }
    
        localStorage.setItem('appColorSettings', JSON.stringify({
            recentColors,
            hue: currentHue,
            chroma: currentChroma,
            lightness: currentLightness
        }));
    }

    function initColorSettings() {
        const savedSettings = localStorage.getItem('appColorSettings');
        if (savedSettings) {
            const settings = JSON.parse(savedSettings);
            recentColors = settings.recentColors || [];
            currentHue = settings.hue || 260;
            currentChroma = settings.chroma || 0.10;
            currentLightness = settings.lightness || 30;
        
            document.getElementById('colorPicker').value = oklchToHex(currentHue, currentChroma, currentLightness);
            applyColorSettings(false);
        } else {
            currentHue = 260;
            currentChroma = 0.10;
            currentLightness = 30;
            document.getElementById('colorPicker').value = oklchToHex(currentHue, currentChroma, currentLightness);
            applyColorSettings(false);
        }
        updateUIText();
    }

    function updateThemeIcon(lightness) {
        const colorPickerBtn = document.getElementById('colorPickerBtn');
        if (!colorPickerBtn) return;
    
        const isLight = lightness > 60;
        const icon = colorPickerBtn.querySelector('i');
    
        if (isLight) {
            icon.className = 'fas fa-sun';
        } else {
            icon.className = 'bi bi-moon-stars-fill';
        }
    }

    const picker = document.getElementById("colorPicker");
    picker.addEventListener('input', (event) => {
        const color = event.target.value;
        console.log('Color picker selected:', color);
        
        const { h, c, l } = hexToOklch(color);
        currentHue = h;
        currentChroma = c;
        currentLightness = l;
        
        applyColorSettings(true);
        addToRecentColors(color);
    });

    initColorSettings();
});
