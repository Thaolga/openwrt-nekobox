<%#
    Spectra is a clean HTML5 theme for LuCI. It is based on luci-theme-material Argon Template
    luci-theme-spectra
    Copyright 2020 Jerrykuku <jerrykuku@qq.com>
    Have a bug? Please create an issue here on GitHub!
    https://github.com/jerrykuku/luci-theme-spectra/issues
    luci-theme-material:
    Copyright 2015 Lutty Yang <lutty@wcan.in>
    Agron Theme
    https://demos.creative-tim.com/spectra-dashboard/index.html
    Licensed to the public under the Apache License 2.0
-%>

<% local ver = require("luci.version") %>
</div>
<footer class="mobile-hide" style="display: none;">
    <a href="https://github.com/openwrt/luci" class="powered-by" target="_blank" rel="noopener noreferrer">Powered by <%= ver.luciname %> (<%= ver.luciversion %>)</a> / <a href="https://github.com/openwrt/openwrt" target="_blank" class="version" rel="noopener noreferrer"><%= ver.distversion %></a>
    <ul class="breadcrumb pull-right" id="modemenu" style="display:none"></ul>
</footer>
</div>
</div>
<div id="tempcpu"></div>
<div id="cpuusage"></div>
<script>
    var luciLocation = <%= luci.http.write_json(luci.dispatcher.context.path) %>;
    var winHeight = $(window).height();
    $(window).resize(function () {
        var winWidth = $(window).width();
        if (winWidth < 600) {
            var newHeight = $(this).height();
            var keyboradHeight = newHeight - winHeight;
            $(".ftc").css("bottom", keyboradHeight + 30);
        }
    });
</script>
<script type="text/javascript">L.require('menu-spectra')</script>
<script>
    window.addEventListener('load', function() {
        setTimeout(function() {
            const footer = document.querySelector('footer.mobile-hide');
            if (footer) {
                footer.style.display = 'block';
            }
        }, 800);
    });
</script>

<script>
const countryMap = {
    'é˜¿å¯Œæ±—': 'ğŸ‡¦ğŸ‡«', 'é˜¿å°”å·´å°¼äºš': 'ğŸ‡¦ğŸ‡±', 'é˜¿å°”åŠåˆ©äºš': 'ğŸ‡©ğŸ‡¿', 'é˜¿æ ¹å»·': 'ğŸ‡¦ğŸ‡·', 'é˜¿æ›¼': 'ğŸ‡´ğŸ‡²',
    'é˜¿å¡æ‹œç–†': 'ğŸ‡¦ğŸ‡¿', 'çˆ±å°”å…°': 'ğŸ‡®ğŸ‡ª', 'åŸƒåŠ': 'ğŸ‡ªğŸ‡¬', 'åŸƒå¡ä¿„æ¯”äºš': 'ğŸ‡ªğŸ‡¹', 'æ¾³å¤§åˆ©äºš': 'ğŸ‡¦ğŸ‡º',
    'å¥¥åœ°åˆ©': 'ğŸ‡¦ğŸ‡¹', 'å·´å·´å¤šæ–¯': 'ğŸ‡§ğŸ‡§', 'å·´å“ˆé©¬': 'ğŸ‡§ğŸ‡¸', 'å·´åŸºæ–¯å¦': 'ğŸ‡µğŸ‡°', 'å·´æ‹¿é©¬': 'ğŸ‡µğŸ‡¦',
    'å·´å¸ƒäºšæ–°å‡ å†…äºš': 'ğŸ‡µğŸ‡¬', 'å·´æ‹‰åœ­': 'ğŸ‡µğŸ‡¾', 'å·´æ—': 'ğŸ‡§ğŸ‡­', 'å·´è¥¿': 'ğŸ‡§ğŸ‡·', 'ç™½ä¿„ç½—æ–¯': 'ğŸ‡§ğŸ‡¾',
    'ä¿åŠ åˆ©äºš': 'ğŸ‡§ğŸ‡¬', 'åŒ—é©¬é‡Œäºšçº³ç¾¤å²›': 'ğŸ‡²ğŸ‡µ', 'æ¯”åˆ©æ—¶': 'ğŸ‡§ğŸ‡ª', 'å†°å²›': 'ğŸ‡®ğŸ‡¸', 'æ³¢å…°': 'ğŸ‡µğŸ‡±',
    'æ³¢å¤šé»å„': 'ğŸ‡µğŸ‡·', 'ç»åˆ©ç»´äºš': 'ğŸ‡§ğŸ‡´', 'åšèŒ¨ç“¦çº³': 'ğŸ‡§ğŸ‡¼', 'ä¸¹éº¦': 'ğŸ‡©ğŸ‡°', 'å¾·å›½': 'ğŸ‡©ğŸ‡ª',
    'ä¸œå¸æ±¶': 'ğŸ‡¹ğŸ‡±', 'å¤šå“¥': 'ğŸ‡¹ğŸ‡¬', 'å¤šç±³å°¼åŠ ': 'ğŸ‡©ğŸ‡´', 'å„ç“œå¤šå°”': 'ğŸ‡ªğŸ‡¨', 'å„ç«‹ç‰¹é‡Œäºš': 'ğŸ‡ªğŸ‡·',
    'æ³•å›½': 'ğŸ‡«ğŸ‡·', 'æ³•ç½—ç¾¤å²›': 'ğŸ‡«ğŸ‡´', 'æ³•å±åœ­äºšé‚£': 'ğŸ‡¬ğŸ‡«', 'èŠ¬å…°': 'ğŸ‡«ğŸ‡®', 'è²å¾‹å®¾': 'ğŸ‡µğŸ‡­',
    'ç¦å…‹å…°ç¾¤å²›': 'ğŸ‡«ğŸ‡°', 'å†ˆæ¯”äºš': 'ğŸ‡¬ğŸ‡²', 'åˆšæœï¼ˆå¸ƒï¼‰': 'ğŸ‡¨ğŸ‡¬', 'åˆšæœï¼ˆé‡‘ï¼‰': 'ğŸ‡¨ğŸ‡©', 'å“¥ä¼¦æ¯”äºš': 'ğŸ‡¨ğŸ‡´',
    'å“¥æ–¯è¾¾é»åŠ ': 'ğŸ‡¨ğŸ‡·', 'æ ¼é²å‰äºš': 'ğŸ‡¬ğŸ‡ª', 'æ ¼æ—çº³è¾¾': 'ğŸ‡¬ğŸ‡©', 'å…³å²›': 'ğŸ‡¬ğŸ‡º', 'ç“œå¾·ç½—æ™®': 'ğŸ‡¬ğŸ‡µ',
    'å“ˆè¨å…‹æ–¯å¦': 'ğŸ‡°ğŸ‡¿', 'æµ·åœ°': 'ğŸ‡­ğŸ‡¹', 'éŸ©å›½': 'ğŸ‡°ğŸ‡·', 'è·å…°': 'ğŸ‡³ğŸ‡±', 'è·å…°åŠ å‹’æ¯”': 'ğŸ‡§ğŸ‡¶',
    'é»‘å±±': 'ğŸ‡²ğŸ‡ª', 'æ´ªéƒ½æ‹‰æ–¯': 'ğŸ‡­ğŸ‡³', 'åŸºé‡Œå·´æ–¯': 'ğŸ‡°ğŸ‡®', 'å‰å¸ƒæ': 'ğŸ‡©ğŸ‡¯', 'å‡ å†…äºš': 'ğŸ‡¬ğŸ‡³',
    'å‡ å†…äºšæ¯”ç»': 'ğŸ‡¬ğŸ‡¼', 'åŠ æ‹¿å¤§': 'ğŸ‡¨ğŸ‡¦', 'åŠ è“¬': 'ğŸ‡¬ğŸ‡¦', 'æŸ¬åŸ”å¯¨': 'ğŸ‡°ğŸ‡­', 'æ·å…‹': 'ğŸ‡¨ğŸ‡¿',
    'æ´¥å·´å¸ƒéŸ¦': 'ğŸ‡¿ğŸ‡¼', 'å¡å¡”å°”': 'ğŸ‡¶ğŸ‡¦', 'å–€éº¦éš†': 'ğŸ‡¨ğŸ‡²', 'ç§‘æ‘©ç½—': 'ğŸ‡°ğŸ‡²', 'ç§‘ç´¢æ²ƒ': 'ğŸ‡½ğŸ‡°',
    'ç§‘å¨ç‰¹': 'ğŸ‡°ğŸ‡¼', 'è‚¯å°¼äºš': 'ğŸ‡°ğŸ‡ª', 'æ‹‰è„±ç»´äºš': 'ğŸ‡±ğŸ‡»', 'è±ç´¢æ‰˜': 'ğŸ‡±ğŸ‡¸', 'é»å·´å«©': 'ğŸ‡±ğŸ‡§',
    'åˆ©æ¯”é‡Œäºš': 'ğŸ‡±ğŸ‡·', 'åˆ©æ¯”äºš': 'ğŸ‡±ğŸ‡¾', 'åˆ—æ”¯æ•¦å£«ç™»': 'ğŸ‡±ğŸ‡®', 'ç«‹é™¶å®›': 'ğŸ‡±ğŸ‡¹', 'å¢æ£®å ¡': 'ğŸ‡±ğŸ‡º',
    'æ¯›é‡Œå¡”å°¼äºš': 'ğŸ‡²ğŸ‡·', 'é©¬è¾¾åŠ æ–¯åŠ ': 'ğŸ‡²ğŸ‡¬', 'é©¬æ‹‰ç»´': 'ğŸ‡²ğŸ‡¼', 'é©¬æ¥è¥¿äºš': 'ğŸ‡²ğŸ‡¾', 'é©¬å°”ä»£å¤«': 'ğŸ‡²ğŸ‡»',
    'é©¬é‡Œ': 'ğŸ‡²ğŸ‡±', 'é©¬è€³ä»–': 'ğŸ‡²ğŸ‡¹', 'é©¬ç»å°”ç¾¤å²›': 'ğŸ‡²ğŸ‡­', 'é©¬æå°¼å…‹': 'ğŸ‡²ğŸ‡¶', 'æ¯›é‡Œæ±‚æ–¯': 'ğŸ‡²ğŸ‡º',
    'è’™å¤': 'ğŸ‡²ğŸ‡³', 'ç¾å›½': 'ğŸ‡ºğŸ‡¸', 'ç¾å±ç»´å°”äº¬ç¾¤å²›': 'ğŸ‡»ğŸ‡®', 'å¯†å…‹ç½—å°¼è¥¿äºš': 'ğŸ‡«ğŸ‡²', 'ç¼…ç”¸': 'ğŸ‡²ğŸ‡²',
    'å—é': 'ğŸ‡¿ğŸ‡¦', 'å—è‹ä¸¹': 'ğŸ‡¸ğŸ‡¸', 'å°¼æ³Šå°”': 'ğŸ‡³ğŸ‡µ', 'å°¼æ—¥å°”': 'ğŸ‡³ğŸ‡ª', 'å°¼æ—¥åˆ©äºš': 'ğŸ‡³ğŸ‡¬',
    'æŒªå¨': 'ğŸ‡³ğŸ‡´', 'è¯ºç¦å…‹å²›': 'ğŸ‡³ğŸ‡«', 'å¸•åŠ³': 'ğŸ‡µğŸ‡¼', 'è‘¡è„ç‰™': 'ğŸ‡µğŸ‡¹', 'æ—¥æœ¬': 'ğŸ‡¯ğŸ‡µ',
    'ç‘å…¸': 'ğŸ‡¸ğŸ‡ª', 'ç‘å£«': 'ğŸ‡¨ğŸ‡­', 'è¨å°”ç“¦å¤š': 'ğŸ‡¸ğŸ‡»', 'å¡å°”ç»´äºš': 'ğŸ‡·ğŸ‡¸', 'å¡æ‹‰åˆ©æ˜‚': 'ğŸ‡¸ğŸ‡±',
    'å¡èˆŒå°”': 'ğŸ‡¸ğŸ‡¨', 'æ²™ç‰¹é˜¿æ‹‰ä¼¯': 'ğŸ‡¸ğŸ‡¦', 'åœ£åŸºèŒ¨å’Œå°¼ç»´æ–¯': 'ğŸ‡°ğŸ‡³', 'åœ£å¢è¥¿äºš': 'ğŸ‡±ğŸ‡¨', 'åœ£é©¬åŠ›è¯º': 'ğŸ‡¸ğŸ‡²',
    'åœ£å¤šç¾å’Œæ™®æ—è¥¿æ¯”': 'ğŸ‡¸ğŸ‡¹', 'åœ£æ–‡æ£®ç‰¹å’Œæ ¼æ—çº³ä¸æ–¯': 'ğŸ‡»ğŸ‡¨', 'æ–¯é‡Œå…°å¡': 'ğŸ‡±ğŸ‡°', 'æ–¯æ´›ä¼å…‹': 'ğŸ‡¸ğŸ‡°',
    'æ–¯æ´›æ–‡å°¼äºš': 'ğŸ‡¸ğŸ‡®', 'æ–¯å¨å£«å…°': 'ğŸ‡¸ğŸ‡¿', 'æ‰€ç½—é—¨ç¾¤å²›': 'ğŸ‡¸ğŸ‡§', 'è‹ä¸¹': 'ğŸ‡¸ğŸ‡©', 'è‹é‡Œå—': 'ğŸ‡¸ğŸ‡·',
    'å°æ¹¾': 'ğŸ‡¹ğŸ‡¼', 'å¦æ¡‘å°¼äºš': 'ğŸ‡¹ğŸ‡¿', 'æ³°å›½': 'ğŸ‡¹ğŸ‡­', 'æ±¤åŠ ': 'ğŸ‡¹ğŸ‡´', 'åœŸè€³å…¶': 'ğŸ‡¹ğŸ‡·',
    'åœŸåº“æ›¼æ–¯å¦': 'ğŸ‡¹ğŸ‡²', 'çªå°¼æ–¯': 'ğŸ‡¹ğŸ‡³', 'å›¾ç“¦å¢': 'ğŸ‡¹ğŸ‡»', 'ç“¦åŠªé˜¿å›¾': 'ğŸ‡»ğŸ‡º', 'å±åœ°é©¬æ‹‰': 'ğŸ‡¬ğŸ‡¹',
    'ä¹Œå¹²è¾¾': 'ğŸ‡ºğŸ‡¬', 'ä¹Œå…‹å…°': 'ğŸ‡ºğŸ‡¦', 'ä¹Œæ‹‰åœ­': 'ğŸ‡ºğŸ‡¾', 'ä¹Œå…¹åˆ«å…‹æ–¯å¦': 'ğŸ‡ºğŸ‡¿', 'è¥¿ç­ç‰™': 'ğŸ‡ªğŸ‡¸',
    'å¸Œè…Š': 'ğŸ‡¬ğŸ‡·', 'æ–°åŠ å¡': 'ğŸ‡¸ğŸ‡¬', 'æ–°å–€é‡Œå¤šå°¼äºš': 'ğŸ‡³ğŸ‡¨', 'æ–°è¥¿å…°': 'ğŸ‡³ğŸ‡¿', 'åŒˆç‰™åˆ©': 'ğŸ‡­ğŸ‡º',
    'å™åˆ©äºš': 'ğŸ‡¸ğŸ‡¾', 'ç‰™ä¹°åŠ ': 'ğŸ‡¯ğŸ‡²', 'ä¼Šæœ—': 'ğŸ‡®ğŸ‡·', 'ä¼Šæ‹‰å…‹': 'ğŸ‡®ğŸ‡¶', 'æ„å¤§åˆ©': 'ğŸ‡®ğŸ‡¹',
    'ä»¥è‰²åˆ—': 'ğŸ‡®ğŸ‡±', 'å°åº¦': 'ğŸ‡®ğŸ‡³', 'å°åº¦å°¼è¥¿äºš': 'ğŸ‡®ğŸ‡©', 'è‹±å›½': 'ğŸ‡¬ğŸ‡§', 'çº¦æ—¦': 'ğŸ‡¯ğŸ‡´',
    'æ³½è¥¿': 'ğŸ‡¯ğŸ‡ª', 'èµæ¯”äºš': 'ğŸ‡¿ğŸ‡²', 'ä¹å¾—': 'ğŸ‡¹ğŸ‡©', 'æ™ºåˆ©': 'ğŸ‡¨ğŸ‡±', 'ä¸­éå…±å’Œå›½': 'ğŸ‡¨ğŸ‡«',
    'ä¸­å›½': 'ğŸ‡¨ğŸ‡³', 'ç›´å¸ƒç½—é™€': 'ğŸ‡¬ğŸ‡®', 'å°æ¹¾': 'ğŸ‡¹ğŸ‡¼', 'æœ±è¯º': 'ğŸ‡¯ğŸ‡ª', 'é¦™æ¸¯': 'ğŸ‡­ğŸ‡°', 'æ¾³é—¨': 'ğŸ‡²ğŸ‡´',
    'å®‰é“å°”': 'ğŸ‡¦ğŸ‡©', 'å®‰å“¥æ‹‰': 'ğŸ‡¦ğŸ‡´', 'å®‰æç“œå’Œå·´å¸ƒè¾¾': 'ğŸ‡¦ğŸ‡¬', 'äºšç¾å°¼äºš': 'ğŸ‡¦ğŸ‡²', 'å­ŸåŠ æ‹‰å›½': 'ğŸ‡§ğŸ‡©',
    'ä¼¯åˆ©å…¹': 'ğŸ‡§ğŸ‡¿', 'è´å®': 'ğŸ‡§ğŸ‡¯', 'ä¸ä¸¹': 'ğŸ‡§ğŸ‡¹', 'æ³¢æ–¯å°¼äºšå’Œé»‘å¡å“¥ç»´é‚£': 'ğŸ‡§ğŸ‡¦', 'æ–‡è±': 'ğŸ‡§ğŸ‡³',
    'å¸ƒåŸºçº³æ³•ç´¢': 'ğŸ‡§ğŸ‡«', 'å¸ƒéš†è¿ª': 'ğŸ‡§ğŸ‡®', 'ä½›å¾—è§’': 'ğŸ‡¨ğŸ‡»', 'å“¥æ–¯è¾¾é»åŠ ': 'ğŸ‡¨ğŸ‡·', 'ç§‘ç‰¹è¿ªç“¦': 'ğŸ‡¨ğŸ‡®',
    'å…‹ç½—åœ°äºš': 'ğŸ‡­ğŸ‡·', 'å¤å·´': 'ğŸ‡¨ğŸ‡º', 'å¡æµ¦è·¯æ–¯': 'ğŸ‡¨ğŸ‡¾', 'å¤šç±³å°¼å…‹': 'ğŸ‡©ğŸ‡²', 'å¤šæ˜å°¼åŠ å…±å’Œå›½': 'ğŸ‡©ğŸ‡´',
    'è¨å°”ç“¦å¤š': 'ğŸ‡¸ğŸ‡»', 'èµ¤é“å‡ å†…äºš': 'ğŸ‡¬ğŸ‡¶', 'å„ç«‹ç‰¹é‡Œäºš': 'ğŸ‡ªğŸ‡·', 'çˆ±æ²™å°¼äºš': 'ğŸ‡ªğŸ‡ª', 'æ–æµ': 'ğŸ‡«ğŸ‡¯',
    'åŠ çº³': 'ğŸ‡¬ğŸ‡­', 'æ ¼æ—çº³è¾¾': 'ğŸ‡¬ğŸ‡©', 'åœ­äºšé‚£': 'ğŸ‡¬ğŸ‡¾', 'æ´ªéƒ½æ‹‰æ–¯': 'ğŸ‡­ğŸ‡³', 'å†°å²›': 'ğŸ‡®ğŸ‡¸',
    'çº¦æ—¦': 'ğŸ‡¯ğŸ‡´', 'è‚¯å°¼äºš': 'ğŸ‡°ğŸ‡ª', 'åŸºé‡Œå·´æ–¯': 'ğŸ‡°ğŸ‡®', 'ç§‘å¨ç‰¹': 'ğŸ‡°ğŸ‡¼', 'å‰å°”å‰æ–¯æ–¯å¦': 'ğŸ‡°ğŸ‡¬',
    'è€æŒ': 'ğŸ‡±ğŸ‡¦', 'æ‹‰è„±ç»´äºš': 'ğŸ‡±ğŸ‡»', 'é»å·´å«©': 'ğŸ‡±ğŸ‡§', 'è±ç´¢æ‰˜': 'ğŸ‡±ğŸ‡¸', 'åˆ©æ¯”é‡Œäºš': 'ğŸ‡±ğŸ‡·',
    'åˆ©æ¯”äºš': 'ğŸ‡±ğŸ‡¾', 'åˆ—æ”¯æ•¦å£«ç™»': 'ğŸ‡±ğŸ‡®', 'ç«‹é™¶å®›': 'ğŸ‡±ğŸ‡¹', 'å¢æ£®å ¡': 'ğŸ‡±ğŸ‡º', 'é©¬è¾¾åŠ æ–¯åŠ ': 'ğŸ‡²ğŸ‡¬',
    'é©¬æ‹‰ç»´': 'ğŸ‡²ğŸ‡¼', 'é©¬æ¥è¥¿äºš': 'ğŸ‡²ğŸ‡¾', 'é©¬å°”ä»£å¤«': 'ğŸ‡²ğŸ‡»', 'é©¬é‡Œ': 'ğŸ‡²ğŸ‡±', 'é©¬è€³ä»–': 'ğŸ‡²ğŸ‡¹',
    'é©¬ç»å°”ç¾¤å²›': 'ğŸ‡²ğŸ‡­', 'æ¯›é‡Œå¡”å°¼äºš': 'ğŸ‡²ğŸ‡·', 'æ¯›é‡Œæ±‚æ–¯': 'ğŸ‡²ğŸ‡º', 'å¢¨è¥¿å“¥': 'ğŸ‡²ğŸ‡½', 'å¯†å…‹ç½—å°¼è¥¿äºš': 'ğŸ‡«ğŸ‡²',
    'æ‘©å°”å¤šç“¦': 'ğŸ‡²ğŸ‡©', 'æ‘©çº³å“¥': 'ğŸ‡²ğŸ‡¨', 'è’™å¤': 'ğŸ‡²ğŸ‡³', 'é»‘å±±': 'ğŸ‡²ğŸ‡ª', 'æ‘©æ´›å“¥': 'ğŸ‡²ğŸ‡¦',
    'è«æ¡‘æ¯”å…‹': 'ğŸ‡²ğŸ‡¿', 'ç¼…ç”¸': 'ğŸ‡²ğŸ‡²', 'çº³ç±³æ¯”äºš': 'ğŸ‡³ğŸ‡¦', 'ç‘™é²': 'ğŸ‡³ğŸ‡·', 'å°¼æ³Šå°”': 'ğŸ‡³ğŸ‡µ',
    'è·å…°': 'ğŸ‡³ğŸ‡±', 'æ–°è¥¿å…°': 'ğŸ‡³ğŸ‡¿', 'å°¼åŠ æ‹‰ç“œ': 'ğŸ‡³ğŸ‡®', 'å°¼æ—¥å°”': 'ğŸ‡³ğŸ‡ª', 'å°¼æ—¥åˆ©äºš': 'ğŸ‡³ğŸ‡¬',
    'åŒ—é©¬å…¶é¡¿': 'ğŸ‡²ğŸ‡°', 'æŒªå¨': 'ğŸ‡³ğŸ‡´', 'é˜¿æ›¼': 'ğŸ‡´ğŸ‡²', 'å·´åŸºæ–¯å¦': 'ğŸ‡µğŸ‡°', 'å¸•åŠ³': 'ğŸ‡µğŸ‡¼',
    'å·´æ‹¿é©¬': 'ğŸ‡µğŸ‡¦', 'å·´å¸ƒäºšæ–°å‡ å†…äºš': 'ğŸ‡µğŸ‡¬', 'å·´æ‹‰åœ­': 'ğŸ‡µğŸ‡¾', 'ç§˜é²': 'ğŸ‡µğŸ‡ª', 'è²å¾‹å®¾': 'ğŸ‡µğŸ‡­',
    'æ³¢å…°': 'ğŸ‡µğŸ‡±', 'è‘¡è„ç‰™': 'ğŸ‡µğŸ‡¹', 'å¡å¡”å°”': 'ğŸ‡¶ğŸ‡¦', 'ç½—é©¬å°¼äºš': 'ğŸ‡·ğŸ‡´', 'ä¿„ç½—æ–¯è”é‚¦': 'ğŸ‡·ğŸ‡º',
    'å¢æ—ºè¾¾': 'ğŸ‡·ğŸ‡¼', 'åœ£åŸºèŒ¨å’Œå°¼ç»´æ–¯': 'ğŸ‡°ğŸ‡³', 'åœ£å¢è¥¿äºš': 'ğŸ‡±ğŸ‡¨', 'åœ£æ–‡æ£®ç‰¹å’Œæ ¼æ—çº³ä¸æ–¯': 'ğŸ‡»ğŸ‡¨', 'è¨æ‘©äºš': 'ğŸ‡¼ğŸ‡¸',
    'åœ£é©¬åŠ›è¯º': 'ğŸ‡¸ğŸ‡²', 'åœ£å¤šç¾å’Œæ™®æ—è¥¿æ¯”': 'ğŸ‡¸ğŸ‡¹', 'æ²™ç‰¹é˜¿æ‹‰ä¼¯': 'ğŸ‡¸ğŸ‡¦', 'å¡å†…åŠ å°”': 'ğŸ‡¸ğŸ‡³', 'å¡å°”ç»´äºš': 'ğŸ‡·ğŸ‡¸',
    'å¡èˆŒå°”': 'ğŸ‡¸ğŸ‡¨', 'å¡æ‹‰åˆ©æ˜‚': 'ğŸ‡¸ğŸ‡±', 'æ–°åŠ å¡': 'ğŸ‡¸ğŸ‡¬', 'æ–¯æ´›ä¼å…‹': 'ğŸ‡¸ğŸ‡°', 'æ–¯æ´›æ–‡å°¼äºš': 'ğŸ‡¸ğŸ‡®',
    'æ‰€ç½—é—¨ç¾¤å²›': 'ğŸ‡¸ğŸ‡§', 'ç´¢é©¬é‡Œ': 'ğŸ‡¸ğŸ‡´', 'å—é': 'ğŸ‡¿ğŸ‡¦', 'éŸ©å›½': 'ğŸ‡°ğŸ‡·', 'å—è‹ä¸¹': 'ğŸ‡¸ğŸ‡¸',
    'è¥¿ç­ç‰™': 'ğŸ‡ªğŸ‡¸', 'æ–¯é‡Œå…°å¡': 'ğŸ‡±ğŸ‡°', 'è‹ä¸¹': 'ğŸ‡¸ğŸ‡©', 'è‹é‡Œå—': 'ğŸ‡¸ğŸ‡·', 'ç‘å…¸': 'ğŸ‡¸ğŸ‡ª',
    'ç‘å£«': 'ğŸ‡¨ğŸ‡­', 'å™åˆ©äºš': 'ğŸ‡¸ğŸ‡¾', 'å¡”å‰å…‹æ–¯å¦': 'ğŸ‡¹ğŸ‡¯', 'å¦æ¡‘å°¼äºš': 'ğŸ‡¹ğŸ‡¿', 'æ³°å›½': 'ğŸ‡¹ğŸ‡­',
    'ä¸œå¸æ±¶': 'ğŸ‡¹ğŸ‡±', 'å¤šå“¥': 'ğŸ‡¹ğŸ‡¬', 'æ±¤åŠ ': 'ğŸ‡¹ğŸ‡´', 'ç‰¹ç«‹å°¼è¾¾å’Œå¤šå·´å“¥': 'ğŸ‡¹ğŸ‡¹', 'çªå°¼æ–¯': 'ğŸ‡¹ğŸ‡³',
    'åœŸè€³å…¶': 'ğŸ‡¹ğŸ‡·', 'åœŸåº“æ›¼æ–¯å¦': 'ğŸ‡¹ğŸ‡²', 'å›¾ç“¦å¢': 'ğŸ‡¹ğŸ‡»', 'ä¹Œå¹²è¾¾': 'ğŸ‡ºğŸ‡¬', 'ä¹Œå…‹å…°': 'ğŸ‡ºğŸ‡¦',
    'é˜¿æ‹‰ä¼¯è”åˆé…‹é•¿å›½': 'ğŸ‡¦ğŸ‡ª', 'è‹±å›½': 'ğŸ‡¬ğŸ‡§', 'ç¾å›½': 'ğŸ‡ºğŸ‡¸', 'ä¹Œæ‹‰åœ­': 'ğŸ‡ºğŸ‡¾', 'ä¹Œå…¹åˆ«å…‹æ–¯å¦': 'ğŸ‡ºğŸ‡¿',
    'ç“¦åŠªé˜¿å›¾': 'ğŸ‡»ğŸ‡º', 'å§”å†…ç‘æ‹‰': 'ğŸ‡»ğŸ‡ª', 'è¶Šå—': 'ğŸ‡»ğŸ‡³', 'ä¹Ÿé—¨': 'ğŸ‡¾ğŸ‡ª', 'èµæ¯”äºš': 'ğŸ‡¿ğŸ‡²',
    'æ´¥å·´å¸ƒéŸ¦': 'ğŸ‡¿ğŸ‡¼'
};

function addFlagIfMissing(titleText) {
    if (/[\u{1F1E6}-\u{1F1FF}]{2}/u.test(titleText)) {
        return titleText;
    }
    for (const name in countryMap) {
        if (titleText.includes(name)) {
            return countryMap[name] + ' ' + titleText;
        }
    }
    return titleText;
}

function wrapEmojiWithSpan(text) {
    return text.replace(/([\u{1F1E6}-\u{1F1FF}]{2})/gu, '<span class="flag">$1</span>');
}

function extractProtocolFromTitle(titleText) {
    const match = titleText.match(/^([^\sï¼š]+)\s*([^\sï¼š]+)ï¼š\s*([\s\S]*)$/);
    if (match) {
        return {
            protocol: match[2],
            actualTitle: match[3] || ''
        };
    }
    return {
        protocol: '',
        actualTitle: titleText
    };
}

function getNodeTypeFromTitle(titleText) {
    if (titleText.includes('Sing-Box')) return 'Sing-Box';
    if (titleText.includes('Xray')) return 'Xray';
    return '';
}

function getProtocolBadge(protocol) {
    const badgeColors = {
        'HY2': '#ff6b6b',
        'HY': '#ffa726',
        'VMess': '#42a5f5',
        'VLESS': '#5c6bc0',
        'SS': '#66bb6a',
        'SSR': '#4caf50',
        'WG': '#ab47bc',
        'Trojan': '#ff69b4',
        'URLTest': '#7e57c2',
        'Balancing': '#ef5350',
        'Shunt': '#26a69a'
    };
    const badgeTexts = {
        'HY2': 'HY2',
        'HY': 'HY',
        'VMess': 'VMess',
        'VLESS': 'VLESS',
        'SS': 'SS',
        'SSR': 'SSR',
        'WG': 'WG',
        'Trojan': 'Trojan',
        'URLTest': 'Test',
        'Balancing': 'Balance',
        'Shunt': 'Shunt'
    };
    const color = badgeColors[protocol] || '#000';
    const text = badgeTexts[protocol] || protocol;
    return `<span class="card-badge" style="background-color: ${color}">${text}</span>`;
}

function convertTablesToCards() {
    const activeContainer = document.querySelector('.cbi-tabcontainer[style*="display: block"], .cbi-tabcontainer[style*="display:block"]');
    if (!activeContainer) return;
    if (activeContainer.getAttribute('data-cards-converted') === 'true') return;

    const table = activeContainer.querySelector('.cbi-section-table');
    if (!table) return;

    const rows = table.querySelectorAll('.cbi-section-table-row');
    if (!rows.length) return;

    const cardsContainer = document.createElement('div');
    cardsContainer.className = 'cards-container';

    rows.forEach(row => {
        const card = document.createElement('div');
        card.className = 'node-card';
        if (row.classList.contains('_now_use_bg')) card.classList.add('_now_use_bg');

        const tds = row.querySelectorAll('td');
        const originalTitle = tds[0]?.textContent || '';
        const ping = tds[1]?.innerHTML || '';
        const tcping = tds[2]?.innerHTML || '';
        const urlTest = tds[3]?.innerHTML || '';
        const actions = tds[4]?.innerHTML || '';

        const remarksSpan = tds[0]?.querySelector('span, div, a');
        let remarksClass = '';
        if (remarksSpan && remarksSpan.classList.contains('_now_use')) remarksClass = '_now_use';

        const { protocol, actualTitle } = extractProtocolFromTitle(originalTitle);
        const nodeType = getNodeTypeFromTitle(originalTitle);

        const titleWithFlag = addFlagIfMissing(actualTitle);

        const badgeHtml = protocol ? getProtocolBadge(protocol) : '';

        card.innerHTML = `
            <div class="card-header ${remarksClass}">
                ${wrapEmojiWithSpan(titleWithFlag)}
                ${badgeHtml}
            </div>
            <div class="card-metrics">
                <div class="metric-item">Ping: ${ping}</div>
                <div class="metric-item">TCPing: ${tcping}</div>
                <div class="metric-item">URL: ${urlTest}</div>
            </div>
            <div class="card-actions">${actions}</div>
        `;

        if (nodeType) card.title = `${nodeType}`;

        cardsContainer.appendChild(card);
    });

    table.parentNode.insertBefore(cardsContainer, table);
    activeContainer.setAttribute('data-cards-converted', 'true');
}

function initAllTabs() {
    document.querySelectorAll('.cbi-tabcontainer').forEach(container => {
        container.removeAttribute('data-cards-converted');
        const oldCards = container.querySelector('.cards-container');
        if (oldCards) oldCards.remove();
    });
    convertTablesToCards();
}

document.addEventListener('DOMContentLoaded', () => setTimeout(initAllTabs, 100));
document.addEventListener('click', e => {
    const tabLink = e.target.closest('.cbi-tab');
    if (tabLink && tabLink.querySelector('a')) setTimeout(initAllTabs, 200);
});

const observer = new MutationObserver(mutations => {
    mutations.forEach(mutation => {
        if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
            const target = mutation.target;
            if (target.classList.contains('cbi-tabcontainer') && target.style.display.includes('block')) {
                setTimeout(initAllTabs, 100);
            }
        }
    });
});

observer.observe(document.body, {
    attributes: true,
    subtree: true,
    attributeFilter: ['style']
});
</script>
</body>
</html>
